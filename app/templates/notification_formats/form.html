{% extends "base.html" %}
{% block title %}{{ 'フォーマット編集' if fmt else '新規フォーマット' }} – Mail Notifier{% endblock %}
{% block content %}
<h2><i class="bi bi-file-text"></i> {{ 'フォーマット編集' if fmt else '新規フォーマット' }}</h2>
<hr>
<form method="post" style="max-width:600px">
  <div class="mb-3">
    <label for="name" class="form-label">フォーマット名</label>
    <input type="text" class="form-control" id="name" name="name" required value="{{ fmt.name if fmt else '' }}">
  </div>
  <div class="mb-3">
    <label for="template" class="form-label">テンプレート</label>
    <textarea class="form-control" id="template" name="template" rows="6" required>{{ fmt.template if fmt else '' }}</textarea>
    <div class="form-text">
      使用可能な変数: <code>{account_name}</code>, <code>{from_address}</code>, <code>{subject}</code>, <code>{rule_name}</code>, <code>{date}</code>
    </div>
  </div>
  <button type="submit" class="btn btn-primary"><i class="bi bi-check-lg"></i> 保存</button>
  <a href="{{ url_for('notification_formats.index') }}" class="btn btn-outline-secondary ms-2">キャンセル</a>
</form>
{% endblock %}